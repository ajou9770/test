<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script>
    function submitForm(event) {
        event.preventDefault();
        var form = document.getElementById('signupForm');
        var signatureImage = canvas.toDataURL(); // ì„œëª…ì„ ì´ë¯¸ì§€ ë°ì´í„° URLë¡œ ë³€í™˜
        var formData = {
          name: form.name.value,
          tel: form.telã….value,
          yes: form.yes.value,
          signature: signatureImage
        };
        google.script.run.processForm(formData);
        form.reset();
        clearSignature();
        alert('ğŸ‘Œì£¼íƒì¢…í•©ê³µì œ ìƒë‹´ ì‹ ì²­ì„œê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤. \n ğŸ™â€â™€ï¸ê°ì‚¬í•©ë‹ˆë‹¤');
      }
      </script>
      <style>
        body {
          margin: 10px;
        }
        #signatureCanvas {
          box-shadow:0px 3px 6px grey;
          border-radius: 5px;
          border: 1px solid black;
          background-color: beige;
        }
        </style>
  </head>
  <body>
    <h4>| ì‹ í˜‘ ì£¼íƒì¢…í•©ê³µì œ ìƒë‹´ ì‹ ì²­ |</h4>
    <hr>
    <form id="signupForm"  onsubmit="submitForm(event)">
      <label class="form-label" for="name">ğŸ¤·â€â™‚ï¸ì´ë¦„:</label>
      <input class="form-control" type="text" id="name" name="name" required><br>
      <label for="tel">â˜ï¸ì—°ë½ì²˜(#í˜•ì‹: 010-0000-0000)
      </label>
      <input class="form-control" type="text" id="tel" pattern="010-[0-9]{4}-[0-9]{4}\s*" value="010-" name="tel" required><br>
      <h5>â­ê°œì¸ì •ë³´ ì œê³µ.í™œìš© ë° ì‚¬ì „ì„¤ê³„ë™ì˜ </h5>
      <small>ğŸ¤·â€â™€ï¸ì•„ë˜ì— ë™ì˜ë¬¸êµ¬ "â—‹"ì²´í¬ ë° ìí•„ì„œëª… ë°”ëë‹ˆë‹¤.</small> 
      <br> <br>
      <input type="radio" name="yes" value="ë™ì˜í•©ë‹ˆë‹¤" required>
      <label for="yes1">ì‹ í˜‘ ì£¼íƒì¢…í•©ê³µì œ ìƒë‹´ì„ ìœ„í•˜ì—¬ ì´ë¦„, ì—°ë½ì²˜ ë“±ì˜ ê°œì¸ì •ë³´ ì œê³µ(í™œìš©) ë° ì‚¬ì „ì„¤ê³„ì— ë™ì˜ í•©ë‹ˆë‹¤.</label>
      <br>
      <div class="mb-3">  
      
      <canvas id="signatureCanvas" width="300" height="150"></canvas>
      </div>
      <button class="btn btn-primary" type="submit">âœ”ì‹ ì²­í•˜ê¸°</button>
      </div>
    </form>
    <script>
      var canvas = document.getElementById('signatureCanvas');
      var ctx = canvas.getContext('2d');
      ctx.lineWidth = 2;
      var isDrawing = false;
      var date = new Date();

      var options = {
      year: 'numeric', month: 'numeric', day: 'numeric',
      hour: 'numeric', minute: 'numeric', second: 'numeric',
      timeZone: 'Asia/Seoul',
      hour12: false
      };
      
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);

      canvas.addEventListener('mousedown', function(event) {
      alert('ğŸ¤·â€â™€ï¸ëª¨ë°”ì¼ì—ì„œë§Œ ì„œëª…í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
       });
      
      function startDrawing(event) {
        isDrawing = true;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.beginPath();
        ctx.moveTo(x, y);
      }
      
      function draw(event) {
        event.preventDefault();
        if (!isDrawing) return;
        var rect = canvas.getBoundingClientRect();
        var x = event.touches[0].clientX - rect.left;
        var y = event.touches[0].clientY - rect.top;
        ctx.lineTo(x, y);
        ctx.stroke();
      }
      
      function stopDrawing() {
        isDrawing = false;
      }
      
      function clearSignature() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
      ctx.font = "15px Arial";  // í°íŠ¸ í¬ê¸°ì™€ ìŠ¤íƒ€ì¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.
      ctx.fillText(`ì„œëª…ì¼ì‹œ: ${new Intl.DateTimeFormat('ko-KR', options).format(date)}`, 5, 140);  // (10, 50) ìœ„ì¹˜ì— "ë¬¸êµ¬"ì‚½ì…
        </script>
      </body>
    </html>

